# 智能客服系统 [![MIT License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE) [![GitHub stars](https://img.shields.io/github/stars/traveler-leon/smart-customer-service-system)](https://github.com/traveler-leon/smart-customer-service-system/stargazers) [![GitHub forks](https://img.shields.io/github/forks/traveler-leon/smart-customer-service-system)](https://github.com/traveler-leon/smart-customer-service-system/network) [![GitHub issues](https://img.shields.io/github/issues/traveler-leon/smart-customer-service-system)](https://github.com/traveler-leon/smart-customer-service-system/issues)

[English](./README_EN.md) | [中文](./README.md) |
**一个为机场领域设计，但可轻松迁移至千行百业的、基于多智能体协作的开源智能客服系统。**

<div align="center">

### 🚀 快速开始

[完整配置](./CONFIGURATION.md)
</div>

## 📝 项目概述

智能客服系统是一个基于 **LangGraph** 构建的、专为机场场景设计的智能问答系统，其模块化和可扩展的设计使其能够轻松迁移到不同行业。

系统采用**多智能体（Multi-Agent）协作架构**，通过意图分类器将用户请求智能路由到不同的子智能体，由各自领域的专家智能体精准地处理用户问题。

目前系统主要提供四大类服务：
1.  **乘机须知问答**：覆盖安检、边检、海关、订票、值机、行李等全流程。
2.  **信息实时查询**：包括航班动态、时刻表等。
3.  **业务在线办理**：支持行李寄存、航班改签等。
4.  **流畅多轮闲聊**：具备上下文理解能力，提供人性化的交流体验。

系统支持多轮对话，能够根据上下文理解用户意图，并通过知识库检索和数据库查询为用户提供准确、及时的信息服务。

## 💥 智能客服的当前困境与我们的解决方案

在大语言模型（LLM）浪潮下，各行各业都在尝试用 AI 升级客服系统。然而，通往真正“智能”的道路上充满了挑战和困境。我们的项目正是为了直面并尝试突破这些困境而设计的。

### 困境一：“AGI 幻觉”——来自外界的过度期望
许多非技术背景的决策者在见证了通用大模型的强大后，容易对 AI 产生“通用人工智能（AGI）”的幻觉，期望智能客服无所不能。
> **我们的解法**：我们认为，决策者对“AGI”的期望，本质上是对一个**真正智能的、能解决核心业务问题的“领域大脑”**的渴望，而非一个简单的问答机器人。我们直面这一需求，致力于打造一个“**领域 AGI**”，在垂直领域内实现真正的、可自主进化的智能，从根本上满足并超越客户的期望。

### 困境二：“新瓶装旧酒”——技术惯性下的架构束缚
当前市场上的许多“智能客服”产品，仅仅是将传统“画布（Canvas）+ 规则”架构中的小模型替换为大模型，这种模式束缚了 LLM 的真正潜力。
> **我们的解法**：我们采用以 **智能体（Agent）协作为核心** 的全新架构，抛弃固化的流程画布，充分释放大模型强大的上下文理解、推理和规划能力，使系统更灵活、更智能、更易于维护。

### 困境三：“成熟范式的引力”——商业现实与创新阻力
“画布+模型”的成熟商业模式让许多服务商不愿进行架构革命。这种商业惯性成为了智能客服领域创新的最大阻力。
> **我们的解法**：我们选择了一条更艰难但更正确的道路——**彻底抛弃旧范式**。我们不满足于在现有产品上修修补补，而是通过全新的智能体协作架构，从根本上重新定义智能客服，为客户创造十倍于旧范式的价值。

### 困境四：缺乏持续运营与迭代体系
智能客服并非一劳永逸的工程，它像传统 AI 模型一样，效果会随时间衰减。系统需要一个全面的运营指标体系来支撑其长期发展。
> **我们的解法**：我们的系统**上线即自带全方位的评估与监测平台**。用户无需额外开发，即可通过可视化界面，实时追踪每一次用户咨询的评估效果，覆盖从技术指标到业务指标的端到端分析，为系统的持续迭代和及时的人工介入提供坚实的数据基础。

## 目录
- [📝 项目概述](#-项目概述)
- [💥 智能客服的当前困境与我们的解决方案](#-智能客服的当前困境与我们的解决方案)
- [🏗️ 系统架构](#️-系统架构)
  - [🛠️ 技术栈](#️-技术栈)
- [✨ 功能亮点](#-功能亮点)
- [🚀 产品功能展示](#-产品功能展示)
- [🎯 下一步计划](#-下一步计划)
- [🚀 快速开始](#-快速开始)
  - [环境要求](#环境要求)
  - [安装步骤](#安装步骤)
  - [运行系统](#运行系统)
  - [📖 详细配置](#-详细配置)
- [🤝 贡献指南](#-贡献指南)
- [📜 许可证](#-许可证)

## 🏗️ 系统架构

系统基于 LangGraph 构建，采用图形化工作流结构，实现了模块化和高内聚。
![系统架构图](./images/主架构图.png)

### 🛠️ 技术栈
- **核心框架**:
  - **LangGraph**: 用于构建多智能体（Multi-Agent）协作的工作流和状态管理。
  - **LangChain**: 提供基础的 LLM 应用开发组件。
- **模型服务**:
  - **Xinference**: 提供模型全生命周期管理，用于部署情感识别、Embedding 及本地大模型。
- **知识库**:
  - **ragflow**: 提供强大的知识库管理平台，支撑 RAG 功能。(用户需自行下载)
- **外部服务接入**:
  - **MCP**: 以弹性方式接入第三方服务，诸如高德地图、12306 等。

## ✨ 功能亮点

我们不止是做一个“聊天机器人”，而是构建一个真正能解决复杂业务问题的智能中枢。与行业内现有方案相比，我们的优势体现在以下几个方面：

### 核心优势：我们与众不同在何处？

| 对比维度 | 传统客服 / 通用大模型客服 | ⭐ **我们的智能客服系统** |
| :--- | :--- | :--- |
| **业务广度** | 局限于静态文档问答（RAG） | **全场景覆盖**：<br/>- **文档问答 (RAG)**<br/>- **数据库问答 (Text2SQL)**<br/>- **业务流程办理 (Agents)** |
| **技术架构** | 固化的“画布+规则”模式 | **多智能体协作 (Multi-Agent)**：<br/>采用业界前沿的 Agent 协作模式，灵活、可扩展。|
| **个性化能力**| 千人一面，无法记忆用户 | **千人千面**：<br/>- **长、中、短期记忆**结合<br/>- 独立**用户画像**沉淀 |
| **生态赋能** | 孤立的内部工具 | **开放赋能**：<br/>- 可将用户画像**赋能第三方应用**（如冷启动推荐）<br/>- 可**接入第三方画像**，增强服务效果 |

### 具体功能与体验

1.  **主动式交互**：当用户问题不够明确时，系统会主动追问和澄清，模拟真人客服的沟通方式，引导用户获得更精准的答案。
2.  **智能推荐与意图引导**：我们认识到用户意图有时是模糊的。为此，系统内置了**智能推荐模块**（“猜你想问”、“猜你想办”、“猜你想买”）。当无法完全确定用户意图时，系统会基于当前对话和知识库，主动推荐相关问题、业务或商品，从而在提升问题解决效率的同时，极大地改善了用户体验并增加了系统的容错能力。
3.  **闭环优化系统**：通过强大的记忆模块持续学习，并将有价值的信息反哺知识库，实现系统能力的自增强。
4.  **多语言支持**：内置多语言模块，在支持多种语言问答的同时，保证信息传达的准确性。
5.  **安全与合规**：内置安全模块，对交互内容进行审查，确保安全合规。
6.  **多模态情感识别**：实时检测用户情绪，动态调整回答语气，并在必要时触发人工介入机制。


## 🚀 产品功能展示

### 基础 RAG 问答 (多轮对话 + 多模态 + 实时语音)
<p align="center">
  <img src="./images/base2.png" alt="案例截图 1" width="260"/>
  <img src="./images/base1.png" alt="案例截图 2" width="260"/>
  <img src="./images/base3.jpg" alt="案例截图 3" width="260"/>
</p>

### Text2SQL (航班信息查询 + 订阅)
<p align="center">
  <img src="./images/flight3.png" alt="案例截图 1" width="260"/>
  <img src="./images/flight2.png" alt="案例截图 2" width="260"/>
  <img src="./images/flight1.png" alt="案例截图 3" width="260"/>
</p>

### 业务办理 (动态参数收集 + 后端 API 调用)
<p align="center">
  <img src="./images/business1.jpg" alt="案例截图 1" width="300"/>
  <img src="./images/business2.jpg" alt="案例截图 2" width="300"/>
</p>

### 情感识别 (规则 + 关键词 + 情感模型触发)
<p align="center">
  <img src="./images/emotion3.jpg" alt="案例截图 1" width="260"/>
  <img src="./images/emotion2.png" alt="案例截图 2" width="260"/>
  <img src="./images/emotion1.png" alt="案例截图 2" width="260"/>
</p>

### 多语言能力 (支持主流及小语种)
<p align="center">
  <img src="./images/mutillanguage.png" alt="案例截图 1" width="400"/>
</p>

### 专家审核平台 (系统自进化的数据闭环)
<p align="center">
  <img src="./images/expert_platform.png" alt="专家审核平台界面" width="800"/>
</p>

传统 AI 客服系统上线后往往"僵化"——无法从实际对话中学习，无法根据业务变化调整。我们通过**专家审核平台**实现了从"一次性交付"到"持续进化"的跨越。

#### 🔍 核心功能
- **智能筛选**：多维度快速定位需要审核的对话（时间范围、用户ID、会话ID、智能体类型、审核状态等）
- **批量操作**：提升审核效率，支持批量评分、批量通过/拒绝、批量添加备注
- **质量评分**：0-1分连续评分，精细化评估每条回复质量，追踪趋势变化
- **内容纠正**：专家在线修正错误回复，保留修改历史，自动生成训练数据
- **统计分析**：审核通过率、问题类型分布、高频错误汇总、优化效果追踪

<p align="center">
  <img src="./images/expert_platform.png" alt="审核详情与数据分析" width="800"/>
  <img src="./images/expert_platform2.png" alt="审核详情与数据分析" width="800"/>
</p>

#### 🔄 四维自进化闭环
专家审核不是终点，而是系统能力增长的起点：

1. **动态知识库增强**  
   专家审核通过的高质量问答对自动添加到知识库。这些来自真实对话的问答对，比人工编写的 FAQ 更贴近用户实际需求。![alt text](https://file%2B.vscode-resource.vscode-cdn.net/Users/hzwl/Documents/coding/smart-customer-service-system/images/expert_platform2.png)

2. **向量模型微调**  
   积累的"相似问题对"和"不相似问题对"用于微调 Embedding 模型，提升检索准确率，让模型更懂行业术语和专业表达。

3. **垂直大模型训练**  
   专家纠正的对话数据是训练行业垂直大模型的宝贵语料，长期可训练出专属的领域大模型，摆脱对通用模型的依赖。

4. **Prompt 持续优化**  
   基于审核反馈和改进建议，数据驱动地迭代优化系统 Prompt，让每次优化都有据可依。

> 💡 **价值体现**：每一次审核，都是 AI 向专家学习的机会。系统不仅仅是一个客服工具，更是一个**可持续成长的智能中枢**。

## 🎯 下一步计划 (Next Steps)

我们的终极目标是打造一个能够自我进化和迭代的智能系统。
1. **添加端到端评测功能**：建立完善的自动化评测流水线。
2. **添加组件级评测功能**：对系统的每个关键模块进行独立的性能评估。
3. **重构记忆模块**：结合最新的 **Context Engineering** 技术，优化长期记忆和用户画像的生成与应用。

## 🚀 快速开始

### 环境要求

- Python 3.12+
- `uv` 包管理器（推荐）或 pip
- Redis（用于会话存储）

### 安装步骤

1.  克隆项目并进入项目目录
    ```bash
    git clone https://github.com/traveler-leon/smart-customer-service-system.git
    cd smart-customer-service-system
    ```

2.  使用 `uv` 创建虚拟环境并安装依赖
    ```bash
    uv sync
    ```
    > `uv` 会自动处理虚拟环境创建和依赖安装，替代传统的 `python -m venv` 和 `pip install`。

3.  配置环境变量
    ```bash
    # 复制环境变量模板文件
    cp .env.example .env
    
    # 编辑 .env 文件，填入必要的 API 密钥和配置
    # 详细配置说明请参考 CONFIGURATION.md
    ```

### 运行系统

```bash
# 运行 FastAPI 应用
uv run main.py
```

系统将在 `http://localhost:8081` 启动。
可进入到docs文件夹下的chat.html下进行对话聊天测试。
<p align="center">
  <img src="./images/example_chat.png" alt="案例截图 1" width="260"/>
</p>
### 📖 详细配置

完整的配置说明和部署指南请参考：
- **[配置与启动指南](./CONFIGURATION.md)** - 详细的环境变量配置、依赖服务部署和启动说明
- **[环境变量模板](./.env.example)** - 包含所有可配置项的模板文件


## 🤝 贡献指南

我们热烈欢迎并感谢所有形式的贡献！无论是提交 Issue、发起 Pull Request，还是改进文档，都是对社区的宝贵支持。

**贡献流程**:
1.  **发现问题或有新想法？** 请先在 [Issues](https://github.com/traveler-leon/smart-customer-service-system/issues) 中创建一个新的 issue，清晰地描述您遇到的问题或想要实现的功能。
2.  **Fork** 本项目。
3.  创建您的功能分支 (`git checkout -b feature/AmazingFeature`)。
4.  提交您的更改 (`git commit -m 'Add some AmazingFeature'`)。
5.  将分支推送到远程仓库 (`git push origin feature/AmazingFeature`)。
6.  创建一个 **Pull Request**，并关联到之前创建的 issue。


## 📜 许可证

本项目基于 [MIT License](LICENSE) 开源。
