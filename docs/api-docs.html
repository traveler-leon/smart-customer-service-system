<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="æ™ºèƒ½å®¢æœç³»ç»Ÿ API æ–‡æ¡£ - WebSocket èŠå¤©æ¥å£å’Œæ™ºèƒ½æ¨èæ¥å£">
    <title>API æ–‡æ¡£ - æ™ºèƒ½å®¢æœç³»ç»Ÿæ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>æ™ºèƒ½å®¢æœç³»ç»Ÿ</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">é¦–é¡µ</a></li>
                <li><a href="user-profile.html" class="nav-link">ç”¨æˆ·ç”»åƒ</a></li>
                <li><a href="api-docs.html" class="nav-link active">API æ–‡æ¡£</a></li>
                <li><a href="architecture.html" class="nav-link">ç³»ç»Ÿæ¶æ„</a></li>
                <li><a href="memory-filter.html" class="nav-link">æ™ºèƒ½è®°å¿†</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <header class="doc-header">
        <div class="container">
            <h1 class="doc-title">API æ–‡æ¡£</h1>
            <p class="doc-subtitle">WebSocket èŠå¤©æ¥å£ã€æ™ºèƒ½æ¨èæ¥å£å’Œå®Œæ•´çš„ç³»ç»Ÿé›†æˆæŒ‡å—</p>
        </div>
    </header>

    <main class="doc-content">
        <div class="container">
            <!-- ä¾§è¾¹å¯¼èˆª -->
            <div style="display: flex; gap: 2rem; align-items: flex-start;">
                <nav class="doc-nav" style="position: sticky; top: 90px; min-width: 250px; background: var(--bg-card); padding: 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md);">
                    <h3 style="margin-bottom: 1rem; color: var(--primary-color);">ç›®å½•</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li><a href="#websocket" style="color: var(--text-secondary); text-decoration: none; display: block; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">WebSocket èŠå¤©</a></li>
                        <li><a href="#recommend" style="color: var(--text-secondary); text-decoration: none; display: block; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">æ™ºèƒ½æ¨è</a></li>
                        <li><a href="#events" style="color: var(--text-secondary); text-decoration: none; display: block; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">äº‹ä»¶ç±»å‹</a></li>
                        <li><a href="#examples" style="color: var(--text-secondary); text-decoration: none; display: block; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">å®Œæ•´ç¤ºä¾‹</a></li>
                        <li><a href="#errors" style="color: var(--text-secondary); text-decoration: none; display: block; padding: 0.5rem 0;">é”™è¯¯å¤„ç†</a></li>
                    </ul>
                </nav>

                <div class="doc-main" style="flex: 1;">
                    <section id="overview">
                        <h2>æ¦‚è¿°</h2>
                        <p>æ™ºèƒ½å®¢æœç³»ç»Ÿæä¾›ä¸¤å¥—ä¸»è¦çš„ API æ¥å£ï¼š</p>
                        <div class="features-grid">
                            <div class="feature-card">
                                <div class="card-icon">ğŸ”—</div>
                                <h3>WebSocket èŠå¤©æ¥å£</h3>
                                <p>æ”¯æŒå®æ—¶åŒå‘é€šä¿¡ã€æ–‡æœ¬å¯¹è¯ã€å›¾ç‰‡è¯†åˆ«ã€è¡¨å•äº¤äº’å’Œå¤šè¯­è¨€æ”¯æŒ</p>
                            </div>
                            <div class="feature-card">
                                <div class="card-icon">ğŸ¤–</div>
                                <h3>æ™ºèƒ½æ¨èæ¥å£</h3>
                                <p>æä¾›é—®é¢˜æ¨èå’Œå•†ä¸šæ¨èæœåŠ¡ï¼ŒåŸºäºç”¨æˆ·è¾“å…¥å’Œä¸Šä¸‹æ–‡è¿›è¡Œæ™ºèƒ½æ¨è</p>
                            </div>
                        </div>
                    </section>

                    <section id="websocket">
                        <h2>WebSocket èŠå¤©æ¥å£</h2>
                        
                        <div class="quick-start-item">
                            <h3>åŸºæœ¬ä¿¡æ¯</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>å±æ€§</th>
                                        <th>å€¼</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>æ¥å£è·¯å¾„</td>
                                        <td><code>/api/v1/airport-assistant/chat/ws</code></td>
                                    </tr>
                                    <tr>
                                        <td>åè®®ç±»å‹</td>
                                        <td>WebSocket</td>
                                    </tr>
                                    <tr>
                                        <td>è¿æ¥æ–¹å¼</td>
                                        <td>å…¨åŒå·¥å®æ—¶é€šä¿¡</td>
                                    </tr>
                                    <tr>
                                        <td>æ¶ˆæ¯æ ¼å¼</td>
                                        <td>JSON</td>
                                    </tr>
                                    <tr>
                                        <td>æ”¯æŒåŠŸèƒ½</td>
                                        <td>æ–‡æœ¬å¯¹è¯ã€å›¾ç‰‡è¯†åˆ«ã€è¡¨å•äº¤äº’ã€å¤šè¯­è¨€æ”¯æŒ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h3>è¿æ¥å»ºç«‹</h3>
                        <pre><code class="language-javascript">const ws = new WebSocket('ws://192.168.0.200/api/v1/airport-assistant/chat/ws');

ws.onopen = function(event) {
    console.log('WebSocket è¿æ¥å·²å»ºç«‹');
};

ws.onmessage = function(event) {
    const message = JSON.parse(event.data);
    console.log('æ”¶åˆ°æ¶ˆæ¯:', message);
};

ws.onerror = function(error) {
    console.error('WebSocket é”™è¯¯:', error);
};

ws.onclose = function(event) {
    console.log('WebSocket è¿æ¥å·²å…³é—­');
};</code></pre>

                        <h3>è¯·æ±‚åè®®</h3>
                        
                        <h4>æ¶ˆæ¯ç»“æ„</h4>
                        <pre><code class="language-json">{
  "thread_id": "ä¼šè¯ID",
  "user_id": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "query": "ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬å†…å®¹",
  "image": {
    "filename": "å›¾ç‰‡æ–‡ä»¶å.jpg",
    "content_type": "image/jpeg",
    "data": "Base64ç¼–ç çš„å›¾ç‰‡æ•°æ®"
  },
  "metadata": {
    "Is_translate": false,
    "Is_emotion": false
  },
  "token": "è®¤è¯ä»¤ç‰Œ"
}</code></pre>

                        <h4>å‚æ•°è¯´æ˜</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>å‚æ•°</th>
                                    <th>ç±»å‹</th>
                                    <th>å¿…å¡«</th>
                                    <th>è¯´æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>thread_id</td>
                                    <td>string</td>
                                    <td>æ˜¯</td>
                                    <td>ä¼šè¯æ ‡è¯†ï¼ŒLangGraphåˆ©ç”¨æ­¤IDç®¡ç†ä¼šè¯çŠ¶æ€</td>
                                </tr>
                                <tr>
                                    <td>user_id</td>
                                    <td>string</td>
                                    <td>æ˜¯</td>
                                    <td>ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºç”¨æˆ·ç”»åƒå…³è”</td>
                                </tr>
                                <tr>
                                    <td>query</td>
                                    <td>string</td>
                                    <td>æ¡ä»¶</td>
                                    <td>ç”¨æˆ·å½“å‰è¾“å…¥å†…å®¹ï¼Œä¸imageè‡³å°‘éœ€è¦ä¸€é¡¹</td>
                                </tr>
                                <tr>
                                    <td>image</td>
                                    <td>object</td>
                                    <td>æ¡ä»¶</td>
                                    <td>å›¾ç‰‡å¯¹è±¡ï¼ŒåŒ…å«æ–‡ä»¶ä¿¡æ¯å’Œbase64æ•°æ®ï¼Œä¸queryè‡³å°‘éœ€è¦ä¸€é¡¹</td>
                                </tr>
                                <tr>
                                    <td>metadata</td>
                                    <td>object</td>
                                    <td>å¦</td>
                                    <td>å¯é€‰çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å’Œç³»ç»Ÿå‚æ•°</td>
                                </tr>
                                <tr>
                                    <td>token</td>
                                    <td>string</td>
                                    <td>å¦</td>
                                    <td>è®¤è¯ä»¤ç‰Œï¼Œå¯é€‰</td>
                                </tr>
                            </tbody>
                        </table>

                        <h4>è¯·æ±‚ç¤ºä¾‹</h4>
                        
                        <div class="quick-start-grid">
                            <div class="quick-start-item">
                                <h4>çº¯æ–‡æœ¬æŸ¥è¯¢</h4>
                                <pre><code class="language-json">{
  "thread_id": "thread_123456",
  "user_id": "user_789",
  "query": "æˆ‘æƒ³æŸ¥è¯¢ä»Šå¤©é£å¾€åŒ—äº¬çš„èˆªç­",
  "metadata": {
    "Is_translate": false,
    "Is_emotion": false
  }
}</code></pre>
                            </div>
                            
                            <div class="quick-start-item">
                                <h4>å›¾ç‰‡æŸ¥è¯¢</h4>
                                <pre><code class="language-json">{
  "thread_id": "thread_123456",
  "user_id": "user_789",
  "query": "è¿™æ˜¯æˆ‘çš„ç™»æœºç‰Œï¼Œè¯·å¸®æˆ‘æŸ¥çœ‹èˆªç­ä¿¡æ¯",
  "image": {
    "filename": "boarding_pass.jpg",
    "content_type": "image/jpeg",
    "data": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
  },
  "metadata": {
    "Is_translate": false,
    "Is_emotion": false
  }
}</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="events">
                        <h2>å“åº”äº‹ä»¶ç±»å‹</h2>
                        
                        <p>å“åº”é‡‡ç”¨ç»“æ„åŒ–JSONæ¶ˆæ¯æ ¼å¼ï¼Œæ¯ä¸ªæ¶ˆæ¯åŒ…å«äº‹ä»¶ç±»å‹å’Œæ•°æ®å†…å®¹ï¼š</p>
                        
                        <pre><code class="language-json">{
  "event": "äº‹ä»¶ç±»å‹",
  "data": {
    "id": "äº‹ä»¶å”¯ä¸€æ ‡è¯†",
    "sequence": 1,
    "content": {
      // æ ¹æ®äº‹ä»¶ç±»å‹ä¸åŒè€Œå˜åŒ–
    }
  }
}</code></pre>

                        <h3>äº‹ä»¶ç±»å‹è¯´æ˜</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>äº‹ä»¶ç±»å‹</th>
                                    <th>è¯´æ˜</th>
                                    <th>è§¦å‘æ—¶æœº</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>start</td>
                                    <td>ä¼šè¯å¼€å§‹æ ‡è®°</td>
                                    <td>æ¥æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯åç«‹å³å‘é€</td>
                                </tr>
                                <tr>
                                    <td>text</td>
                                    <td>æ–‡æœ¬ç±»å“åº”</td>
                                    <td>è¿”å›æ–‡æœ¬å†…å®¹æ—¶</td>
                                </tr>
                                <tr>
                                    <td>form</td>
                                    <td>äº¤äº’å¼è¡¨å•</td>
                                    <td>éœ€è¦ç”¨æˆ·å¡«å†™ä¿¡æ¯æ—¶</td>
                                </tr>
                                <tr>
                                    <td>flight_list</td>
                                    <td>èˆªç­å·åˆ—è¡¨å±•ç¤º</td>
                                    <td>è¿”å›å¤šä¸ªèˆªç­å·ï¼Œä¾›ç”¨æˆ·ç‹¬ç«‹è®¢é˜…</td>
                                </tr>
                                <tr>
                                    <td>end</td>
                                    <td>å“åº”ç»“æŸæ ‡è®°</td>
                                    <td>æ‰€æœ‰å¤„ç†å®Œæˆåå‘é€</td>
                                </tr>
                                <tr>
                                    <td>error</td>
                                    <td>é”™è¯¯ä¿¡æ¯</td>
                                    <td>å¤„ç†å¼‚å¸¸æ—¶å‘é€</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>æ–‡æœ¬å“åº” (event: text)</h3>
                        <pre><code class="language-json">{
  "event": "text",
  "data": {
    "id": "text-1672847123456-1",
    "sequence": 1,
    "content": {
      "text": "æ‚¨å¥½ï¼æˆ‘æ˜¯æœºåœºæ™ºèƒ½å®¢æœï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚è¯·é—®æ‚¨éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ",
      "format": "plain"
    }
  }
}</code></pre>

                        <h4>æ–‡æœ¬æ ¼å¼é€‰é¡¹</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>æ ¼å¼é€‰é¡¹</th>
                                    <th>è¯´æ˜</th>
                                    <th>ç¤ºä¾‹</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>plain</td>
                                    <td>çº¯æ–‡æœ¬æ ¼å¼ï¼Œä¸åŒ…å«ä»»ä½•æ ·å¼</td>
                                    <td>"æ‚¨å¥½ï¼æ¬¢è¿ä½¿ç”¨æœºåœºæœåŠ¡"</td>
                                </tr>
                                <tr>
                                    <td>markdown</td>
                                    <td>Markdownæ ¼å¼ï¼Œæ”¯æŒæ ‡é¢˜ã€åˆ—è¡¨ã€å¼ºè°ƒç­‰åŸºæœ¬æ ¼å¼</td>
                                    <td>"## èˆªç­ä¿¡æ¯\n* èˆªç­å·: **MU5735**"</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>è¡¨å•å“åº” (event: form)</h3>
                        <pre><code class="language-json">{
  "event": "form",
  "data": {
    "id": "form-1672847123456-business",
    "sequence": 2,
    "content": {
      "form_id": "business-1672847123",
      "title": "è½®æ¤…ç§Ÿèµç”³è¯·",
      "description": "è¯·å¡«å†™ä»¥ä¸‹ä¿¡æ¯å®Œæˆè½®æ¤…ç§Ÿèµç”³è¯·",
      "action": "/api/v1/business/wheelchair-rental",
      "fields": [
        {
          "id": "cjr",
          "type": "text",
          "label": "é¢„çº¦äººå§“å",
          "placeholder": "è¯·è¾“å…¥é¢„çº¦äººå§“å",
          "required": true,
          "value": "å¼ ä¸‰"
        },
        {
          "id": "id_number",
          "type": "text",
          "label": "èº«ä»½è¯å·ç ",
          "placeholder": "è¯·è¾“å…¥18ä½èº«ä»½è¯å·ç ",
          "required": true,
          "validation": {
            "pattern": "^[0-9]{18}$",
            "error_message": "è¯·è¾“å…¥æœ‰æ•ˆçš„18ä½èº«ä»½è¯å·ç "
          }
        }
      ],
      "buttons": [
        {
          "id": "submit",
          "label": "æäº¤ç”³è¯·",
          "type": "submit"
        },
        {
          "id": "cancel",
          "label": "å–æ¶ˆ",
          "type": "cancel"
        }
      ]
    }
  }
}</code></pre>

                        <h4>è¡¨å•å­—æ®µç±»å‹</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>å­—æ®µç±»å‹</th>
                                    <th>è¯´æ˜</th>
                                    <th>æ”¯æŒå±æ€§</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>text</td>
                                    <td>æ–‡æœ¬è¾“å…¥æ¡†</td>
                                    <td>placeholder, maxlength, required, value, validation</td>
                                </tr>
                                <tr>
                                    <td>number</td>
                                    <td>æ•°å­—è¾“å…¥æ¡†</td>
                                    <td>min, max, step, required, value</td>
                                </tr>
                                <tr>
                                    <td>email</td>
                                    <td>é‚®ç®±è¾“å…¥æ¡†</td>
                                    <td>placeholder, required, value, validation</td>
                                </tr>
                                <tr>
                                    <td>tel</td>
                                    <td>ç”µè¯è¾“å…¥æ¡†</td>
                                    <td>placeholder, pattern, required, value, validation</td>
                                </tr>
                                <tr>
                                    <td>datetime-local</td>
                                    <td>æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨</td>
                                    <td>placeholder, required, value</td>
                                </tr>
                                <tr>
                                    <td>select</td>
                                    <td>ä¸‹æ‹‰é€‰æ‹©æ¡†</td>
                                    <td>options, required, value</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>èˆªç­å·åˆ—è¡¨å“åº” (event: flight_list)</h3>
                        <pre><code class="language-json">{
  "event": "flight_list",
  "data": {
    "id": "flight_list-1720593765000-1",
    "sequence": 3,
    "content": {
      "title": "ä»¥ä¸‹æ˜¯ä¸ºæ‚¨æ‰¾åˆ°çš„èˆªç­å·ï¼š",
      "flights": [
        {
          "flight_number": "CZ1234",
          "subscribe_supported": true
        },
        {
          "flight_number": "MU5678",
          "subscribe_supported": true
        },
        {
          "flight_number": "ZH9999",
          "subscribe_supported": false
        }
      ],
      "action_hint": "ç‚¹å‡»æ¯ä¸ªèˆªç­å³ä¾§çš„æŒ‰é’®å¯è®¢é˜…èˆªç­åŠ¨æ€"
    }
  }
}</code></pre>
                    </section>

                    <section id="recommend">
                        <h2>æ™ºèƒ½æ¨èæ¥å£</h2>
                        
                        <div class="quick-start-item">
                            <h3>åŸºç¡€ä¿¡æ¯</h3>
                            <ul>
                                <li><strong>åŸºç¡€URL</strong>: <code>http://localhost:8081</code></li>
                                <li><strong>Content-Type</strong>: <code>application/json</code></li>
                                <li><strong>è®¤è¯æ–¹å¼</strong>: é€šè¿‡è¯·æ±‚å¤´ä¸­çš„ <code>token</code> å­—æ®µè¿›è¡Œè®¤è¯</li>
                            </ul>
                        </div>

                        <h3>1. é—®é¢˜æ¨èæ¥å£</h3>
                        
                        <div class="quick-start-item">
                            <h4>æ¥å£ä¿¡æ¯</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>å±æ€§</th>
                                        <th>å€¼</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>æ¥å£è·¯å¾„</td>
                                        <td><code>/api/v1/question-recommend/questions</code></td>
                                    </tr>
                                    <tr>
                                        <td>è¯·æ±‚æ–¹æ³•</td>
                                        <td>POST</td>
                                    </tr>
                                    <tr>
                                        <td>æ¥å£æè¿°</td>
                                        <td>åŸºäºç”¨æˆ·çš„å½“å‰é—®é¢˜å’Œä¸Šä¸‹æ–‡ï¼Œæ¨èç›¸å…³çš„åç»­é—®é¢˜</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>è¯·æ±‚ç¤ºä¾‹</h4>
                        <pre><code class="language-bash">curl -X POST "http://localhost:8081/api/v1/question-recommend/questions" \
  -H "Content-Type: application/json" \
  -H "token: your_token_here" \
  -d '{
    "thread_id": "thread_123",
    "user_id": "user_456",
    "query": "æˆ‘æƒ³äº†è§£æœºåœºå®‰æ£€è§„å®š",
    "metadata": {
      "Is_translate": false,
      "Is_emotion": true
    }
  }'</code></pre>

                        <h4>æˆåŠŸå“åº”</h4>
                        <pre><code class="language-json">{
  "ret_code": "000000",
  "ret_msg": "æ“ä½œæˆåŠŸ",
  "item": {
    "thread_id": "thread_123",
    "user_id": "user_456",
    "recommended_questions": [
      "æ˜¯å¦å¯ä»¥æºå¸¦æ¶²ä½“ä¸Šé£æœºï¼Ÿ",
      "å……ç”µå®çš„å®¹é‡é™åˆ¶æ˜¯å¤šå°‘ï¼Ÿ",
      "ç™»æœºæ—¶éœ€è¦æå‰å¤šä¹…åˆ°è¾¾æœºåœºï¼Ÿ"
    ],
    "processing_time": "1.23s"
  }
}</code></pre>

                        <h3>2. å•†ä¸šæ¨èæ¥å£</h3>
                        
                        <div class="quick-start-item">
                            <h4>æ¥å£ä¿¡æ¯</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>å±æ€§</th>
                                        <th>å€¼</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>æ¥å£è·¯å¾„</td>
                                        <td><code>/api/v1/business-recommend/business</code></td>
                                    </tr>
                                    <tr>
                                        <td>è¯·æ±‚æ–¹æ³•</td>
                                        <td>POST</td>
                                    </tr>
                                    <tr>
                                        <td>æ¥å£æè¿°</td>
                                        <td>åŸºäºç”¨æˆ·çš„å½“å‰é—®é¢˜å’Œä¸Šä¸‹æ–‡ï¼Œæ¨èç›¸å…³çš„æœºåœºä¸šåŠ¡æœåŠ¡</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>è¯·æ±‚ç¤ºä¾‹</h4>
                        <pre><code class="language-bash">curl -X POST "http://localhost:8081/api/v1/business-recommend/business" \
  -H "Content-Type: application/json" \
  -H "token: your_token_here" \
  -d '{
    "thread_id": "thread_123",
    "user_id": "user_456",
    "query": "æˆ‘è¡ŒåŠ¨ä¸ä¾¿ï¼Œéœ€è¦å¸®åŠ©",
    "metadata": {
      "Is_translate": false,
      "Is_emotion": true
    }
  }'</code></pre>

                        <h4>æˆåŠŸå“åº”</h4>
                        <pre><code class="language-json">{
  "ret_code": "000000",
  "ret_msg": "æ“ä½œæˆåŠŸ",
  "item": {
    "thread_id": "thread_123",
    "user_id": "user_456",
    "recommended_business": [
      "è½®æ¤…ç§ŸèµæœåŠ¡",
      "æ— äººé™ªä¼´å„¿ç«¥æœåŠ¡",
      "ç‰¹æ®Šé¤é£Ÿç”³è¯·",
      "è¡Œæå¯„å­˜æœåŠ¡",
      "è´µå®¾ä¼‘æ¯å®¤æœåŠ¡"
    ],
    "processing_time": "1.45s"
  }
}</code></pre>
                    </section>

                    <section id="examples">
                        <h2>å®Œæ•´å¯¹è¯ç¤ºä¾‹</h2>
                        
                        <h3>å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</h3>
                        <pre><code class="language-json">{
  "thread_id": "thread_20241224_001",
  "user_id": "passenger_12345",
  "query": "æˆ‘æƒ³åŠç†å€¼æœºæ‰‹ç»­",
  "metadata": {
    "Is_translate": false,
    "Is_emotion": false
  }
}</code></pre>

                        <h3>æœåŠ¡ç«¯å“åº”åºåˆ—</h3>
                        
                        <div class="quick-start-grid">
                            <div class="quick-start-item">
                                <h4>å“åº”1: å¼€å§‹äº‹ä»¶</h4>
                                <pre><code class="language-json">{
  "event": "start",
  "thread_id": "thread_20241224_001",
  "user_id": "passenger_12345"
}</code></pre>
                            </div>
                            
                            <div class="quick-start-item">
                                <h4>å“åº”2: æ–‡æœ¬äº‹ä»¶</h4>
                                <pre><code class="language-json">{
  "event": "text",
  "data": {
    "id": "text-1672847123456-1",
    "sequence": 1,
    "content": {
      "text": "æ‚¨å¥½ï¼æˆ‘æ¥å¸®æ‚¨åŠç†å€¼æœºæ‰‹ç»­ã€‚ä¸ºäº†æ›´å¥½åœ°ä¸ºæ‚¨æœåŠ¡ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š",
      "format": "plain"
    }
  }
}</code></pre>
                            </div>
                            
                            <div class="quick-start-item">
                                <h4>å“åº”3: è¡¨å•äº‹ä»¶</h4>
                                <pre><code class="language-json">{
  "event": "form",
  "data": {
    "id": "form-1672847123456-checkin",
    "sequence": 2,
    "content": {
      "form_id": "checkin-1672847123",
      "title": "å€¼æœºåŠç†",
      "description": "è¯·å¡«å†™æ‚¨çš„èˆªç­ä¿¡æ¯",
      "action": "/api/v1/checkin/submit",
      "fields": [
        {
          "id": "booking_reference",
          "label": "è®¢ç¥¨å·/ç¡®è®¤å·",
          "type": "text",
          "required": true,
          "placeholder": "6ä½è®¢ç¥¨å·ç "
        },
        {
          "id": "passenger_surname",
          "label": "æ—…å®¢å§“æ°",
          "type": "text",
          "required": true,
          "placeholder": "è¯·è¾“å…¥å§“æ°"
        }
      ],
      "buttons": [
        {
          "id": "submit",
          "label": "å¼€å§‹å€¼æœº",
          "type": "primary",
          "action": "submit"
        }
      ]
    }
  }
}</code></pre>
                            </div>
                            
                            <div class="quick-start-item">
                                <h4>å“åº”4: ç»“æŸäº‹ä»¶</h4>
                                <pre><code class="language-json">{
  "event": "end",
  "data": {
    "id": "end-1672847123456-1",
    "sequence": 3,
    "content": {
      "suggestions": ["æŸ¥è¯¢èˆªç­çŠ¶æ€", "é€‰æ‹©åº§ä½", "è¡Œææ‰˜è¿"],
      "metadata": {
        "processing_time": "0.8s",
        "results_count": 1
      }
    }
  }
}</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="errors">
                        <h2>é”™è¯¯å¤„ç†</h2>
                        
                        <h3>é”™è¯¯ç è¯´æ˜</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>é”™è¯¯ç </th>
                                    <th>è¯´æ˜</th>
                                    <th>å¤„ç†å»ºè®®</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>invalid_json</td>
                                    <td>JSONæ ¼å¼é”™è¯¯</td>
                                    <td>æ£€æŸ¥è¯·æ±‚æ ¼å¼æ˜¯å¦æ­£ç¡®</td>
                                </tr>
                                <tr>
                                    <td>missing_fields</td>
                                    <td>å¿…è¦å­—æ®µç¼ºå¤±</td>
                                    <td>ç¡®ä¿æä¾›å¿…è¦çš„å­—æ®µä¿¡æ¯</td>
                                </tr>
                                <tr>
                                    <td>service_unavailable</td>
                                    <td>æœåŠ¡ä¸å¯ç”¨</td>
                                    <td>ç¨åé‡è¯•æˆ–è”ç³»å®¢æœ</td>
                                </tr>
                                <tr>
                                    <td>authentication_failed</td>
                                    <td>è®¤è¯å¤±è´¥</td>
                                    <td>æ£€æŸ¥tokenæ˜¯å¦æœ‰æ•ˆ</td>
                                </tr>
                                <tr>
                                    <td>rate_limit_exceeded</td>
                                    <td>è¯·æ±‚é¢‘ç‡è¶…é™</td>
                                    <td>é™ä½è¯·æ±‚é¢‘ç‡</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>è¿æ¥é”™è¯¯å¤„ç†</h3>
                        <pre><code class="language-javascript">function connectWebSocket() {
    const ws = new WebSocket('ws://your-domain/api/v1/airport-assistant/chat/ws');
    
    ws.onclose = function(event) {
        console.log('è¿æ¥å…³é—­ï¼Œ5ç§’åé‡è¿...');
        setTimeout(connectWebSocket, 5000);
    };
    
    ws.onerror = function(error) {
        console.error('WebSocket é”™è¯¯:', error);
    };
}

function sendMessage(message) {
    if (ws.readyState === WebSocket.OPEN) {
        ws.send(JSON.stringify(message));
    } else {
        console.error('WebSocket è¿æ¥æœªå»ºç«‹');
    }
}</code></pre>

                        <h3>é”™è¯¯äº‹ä»¶å“åº”</h3>
                        <pre><code class="language-json">{
  "event": "error",
  "data": {
    "id": "error-service_unavailable-1672847123456",
    "sequence": 1,
    "content": {
      "error_code": "service_unavailable",
      "error_message": "æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•"
    }
  }
}</code></pre>
                    </section>

                    <section id="notes">
                        <h2>æ³¨æ„äº‹é¡¹</h2>
                        
                        <div class="features-grid">
                            <div class="feature-card">
                                <h3>å›¾ç‰‡å¤„ç†</h3>
                                <ul>
                                    <li>å›¾ç‰‡å¤§å°é™åˆ¶: å»ºè®®ä¸è¶…è¿‡10MB</li>
                                    <li>æ”¯æŒæ ¼å¼: JPEG, PNG, GIF, WebP</li>
                                    <li>éœ€è¦base64ç¼–ç ä¼ è¾“</li>
                                </ul>
                            </div>
                            
                            <div class="feature-card">
                                <h3>å¹¶å‘é™åˆ¶</h3>
                                <ul>
                                    <li>å•ç”¨æˆ·å¹¶å‘è¯·æ±‚æ•°ä¸è¶…è¿‡10ä¸ª</li>
                                    <li>ä½¿ç”¨ä¸åŒthread_idåŒºåˆ†ä¼šè¯</li>
                                    <li>å“åº”æ—¶é—´é€šå¸¸åœ¨1-3ç§’</li>
                                </ul>
                            </div>
                            
                            <div class="feature-card">
                                <h3>å®‰å…¨è€ƒè™‘</h3>
                                <ul>
                                    <li>æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«è®°å½•å’Œç›‘æ§</li>
                                    <li>æ•æ„Ÿä¿¡æ¯ä¼šè¢«è¿‡æ»¤å¤„ç†</li>
                                    <li>æ”¯æŒç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <div style="text-align: center; margin: 3rem 0;">
                        <p><em>æœ€åæ›´æ–°: 2024å¹´12æœˆ</em></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>æ–‡æ¡£</h4>
                    <ul>
                        <li><a href="api-docs.html">API æ–‡æ¡£</a></li>
                        <li><a href="user-profile.html">ç”¨æˆ·ç”»åƒ</a></li>
                        <li><a href="architecture.html">ç³»ç»Ÿæ¶æ„</a></li>
                        <li><a href="memory-filter.html">æ™ºèƒ½è®°å¿†</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>èµ„æº</h4>
                    <ul>
                        <li><a href="#examples">ä½¿ç”¨ç¤ºä¾‹</a></li>
                        <li><a href="#tutorials">æ•™ç¨‹æŒ‡å—</a></li>
                        <li><a href="#changelog">æ›´æ–°æ—¥å¿—</a></li>
                        <li><a href="#support">æŠ€æœ¯æ”¯æŒ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>å…³äº</h4>
                    <ul>
                        <li><a href="#about">é¡¹ç›®ä»‹ç»</a></li>
                        <li><a href="#team">å¼€å‘å›¢é˜Ÿ</a></li>
                        <li><a href="#license">å¼€æºè®¸å¯</a></li>
                        <li><a href="#contact">è”ç³»æˆ‘ä»¬</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 æ™ºèƒ½å®¢æœç³»ç»Ÿ. ç‰ˆæƒæ‰€æœ‰.</p>
            </div>
        </div>
    </footer>

    <script src="assets/js/main.js"></script>
</body>
</html>
